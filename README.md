# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Архитектура приложения
Код приложения разделен на слои согласно парадигме MVP:
- слой представления, отвечает за отображение данных на странице,
- слой данных, отвечает за хранение и изменение данных
- презентер, отвечает за связь представления и данных.

## Базовый код

## Класс Api
Содержит в себе базовую логику отправки запросов. В конструктор передается базовый адрес сервера и опциональный объект с заголовками запросов. 

### Методы класса
- `protected handleResponse` Обрабатывает ответ от сервера. Если запрос успешен, возвращает JSON, иначе выбрасывает ошибку с описанием.
- `get` Выполняет GET-запрос по указанному URI и возвращает ответ.
- `post` Выполняет POST, PUT или DELETE-запрос по указанному URI с переданными данными и возвращает ответ.

## Класс EventEmitter
Брокер событий позволяет отправлять события и подписываться на события, происходящие в системе. Класс используется в презентере для обработки событий и в слоях приложения для генерации событий.
Основные методы, реализуемые классом описаны интерфейсом IEvents:
### Методы класса
- `on` - Добавляет обработчик для указанного события.
- `off` - Удаляет обработчик для указанного события.
- `emit` - Инициирует событие с переданными данными.
- `onAll` - Добавляет обработчик, который слушает все события.
- `offAll` - Удаляет все обработчики событий.
- `trigger` - Создаёт функцию, которая инициирует указанное событие при вызове.

## Описание классов Model
## Класс ApiModel
Передаёт и получает данные от сервера. Наследуется от класса Api.
### Методы класса
- `getListProductCard` - получаем массив объектов(карточек) с сервера.
- `postOrderLot` - получаем ответ от сервера по сделанному/отправленному заказу.

## Класс BasketModel
Хранит и работает с данными полученными от пользователя.
### Методы класса
- `getCounter` - возвращает количество товаров в корзине.
- `getSumAllProducts` - считает и возвращает сумму синапсов всех товаров в корзине.
- `setSelectedСard` - добавляет товар в корзину.
- `deleteCardToBasket` - удаляет товар из корзины.
- `clearBasketProducts` - очищает/удаляет все товары из корзины.

## Класс DataModel
Принимает и хранит данные продуктов полученные с сервера.
### Методы класса
- `setPreview` - получает данные карточки которую открыл пользователь.

## Класс FormModel
Хранит данные полученные от пользователя.
### Методы класса
- `setOrderAddress` - принимаем/сохраняет адрес пользователя.
- `validateOrder` - проверяет адрес пользователя / и способ оплаты.
- `setOrderData` - принимаем/сохраняет номер телефона/почту пользователя.
- `validateContacts` - проверяет номер телефона/почту пользователя.
- `getOrderLot` - возвращает объект данных пользователя с выбранными товарами.

## Классы View
### Класс Basket
Управляет отображением корзины.
### Методы класса
- `renderHeaderBasketCounter` - сохраняет и устанавливает какое количество товаров находится в корзине.
- `renderSumAllProducts` - сохраняет и устанавливает сумму синапсов всех товаров в корзине.

### Класс BasketItem 
Управляет отображением элементов(продуктов) в корзине.
### Методы класса
- `setPrice` - принимает цену продукта в числовом значении и возвращает в строчном.

## Класс Card
Отображает карточку товара.
### Методы класса
- `setText` - принимает два значения, первое HTMLElement, второе значение задаёт текстовое содержимое HTMLElement.
- `cardCategory` - принимает строчное значение и создаёт новый className для HTMLElement.
- `setPrice` - принимает цену продукта в числовом значении и возвращает в строчном.

## Класс CardPreview
Класс CardPreview наследует все методы и свойства  класса Card и управляет отображением подробного описания карточки товара в превью, позволяет добавить карточку в корзину.
### Методы класса
- `notSale` - принимает данные о продукте, проверяет наличие цены продукта, при отсутствии цены ограничивает покупку.

## Класс Order
Управляет отображением содержимого модального окна и позволяет принять от пользователя метод оплаты и адрес.
### Методы класса
- `paymentSelection` - устанавливаем обводку вокруг выбранного метода оплаты.

### Класс Contacts
Управляет отображением содержимого модального окна и позволяет принять от пользователя номер телефона и Email.

### Класс Modal 
Управляет отображением модальных окон.
### Методы класса
- `open` - отображает модальное окон.
- `close` - закрывает модальное окно.

### Класс Success 
Управляет отображением удачного заказа в модальном окне.